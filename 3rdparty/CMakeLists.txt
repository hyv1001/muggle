set(third_party_folder "ThirdParty")

set(BUILD_SHARED_LIBS OFF CACHE BOOL "" FORCE)

if(NOT TARGET imgui)
    include(imgui.cmake)
    set_target_properties(imgui PROPERTIES FOLDER ${third_party_folder}/imgui)
endif()

if(NOT TARGET glad)
    set(GLAD_SOURCES glad/src/gl.c glad/src/vulkan.c)

    if(WIN32)
        set(GLAD_SOURCES ${GLAD_SOURCES} glad/src/wgl.c)
    endif()

    add_library(glad ${GLAD_SOURCES})
    target_include_directories(glad PUBLIC "glad/include")
    set_target_properties(glad PROPERTIES FOLDER ${third_party_folder}/glad)
endif()

if(NOT TARGET glm)
    option(BUILD_STATIC_LIBS "" ON)
    option(BUILD_TESTING "" OFF)
    option(GLM_TEST_ENABLE "" OFF)
    add_subdirectory(glm)
    set_target_properties(glm PROPERTIES FOLDER ${third_party_folder}/glm)
endif()

if(NOT TARGET glfw)
    option(GLFW_BUILD_EXAMPLES "" OFF)
    option(GLFW_BUILD_TESTS "" OFF)
    option(GLFW_BUILD_DOCS "" OFF)
    option(GLFW_INSTALL "" OFF)
    add_subdirectory(glfw)
    set_target_properties(glfw PROPERTIES FOLDER ${third_party_folder}/glfw)
    set_target_properties(update_mappings PROPERTIES FOLDER ${third_party_folder}/glfw)
endif()

if(NOT TARGET spdlog)
    option(SPDLOG_BUILD_EXAMPLE "" OFF)
    option(SPDLOG_INSTALL "" OFF)
    add_subdirectory(spdlog)
    set_target_properties(spdlog PROPERTIES FOLDER ${third_party_folder}/spdlog)
endif()

if(NOT TARGET nvrhi)
    option(NVRHI_INSTALL "" OFF)
    add_subdirectory(nvrhi)
    set_target_properties(nvrhi PROPERTIES FOLDER ${third_party_folder}/nvrhi)

    if(NVRHI_WITH_DX11)
        set_target_properties(nvrhi_d3d11 PROPERTIES FOLDER ${third_party_folder}/nvrhi)
    endif()

    if(NVRHI_WITH_DX12)
        set_target_properties(nvrhi_d3d12 PROPERTIES FOLDER ${third_party_folder}/nvrhi)
    endif()

    if(NVRHI_WITH_VULKAN)
        set_target_properties(nvrhi_vk PROPERTIES FOLDER ${third_party_folder}/nvrhi)
    endif()

    # set_target_properties(uninstall PROPERTIES FOLDER ${third_party_folder}/nvrhi)
endif()

if(NOT TARGET assimp)
    option(BUILD_SHARED_LIBS "" OFF)

    # option(ASSIMP_BUILD_ZLIB "" OFF)
    option(ASSIMP_BUILD_ASSIMP_TOOLS "" OFF)
    option(ASSIMP_BUILD_SAMPLES "" OFF)
    option(ASSIMP_BUILD_TESTS "" OFF)
    option(ASSIMP_INSTALL "" OFF)
    option(ASSIMP_INSTALL_PDB "" OFF)
    option(ASSIMP_BUILD_ALL_IMPORTERS_BY_DEFAULT "" OFF)
    option(ASSIMP_NO_EXPORT "" ON)
    option(ASSIMP_BUILD_OBJ_IMPORTER "" ON)
    option(ASSIMP_BUILD_GLTF_IMPORTER "" ON)

    add_subdirectory(assimp)
    set_target_properties(assimp PROPERTIES FOLDER ${third_party_folder}/assimp)
    set_target_properties(zlibstatic PROPERTIES FOLDER ${third_party_folder}/assimp)
    set_target_properties(UpdateAssimpLibsDebugSymbolsAndDLLs PROPERTIES FOLDER ${third_party_folder}/assimp)
endif()

if(NOT TARGET meshoptimizer)
    option(MESHOPT_BUILD_DEMO "" OFF)
    option(MESHOPT_BUILD_GLTFPACK "" OFF)
    option(MESHOPT_BUILD_SHARED_LIBS "" OFF)

    add_subdirectory(meshoptimizer)
    set_target_properties(meshoptimizer PROPERTIES FOLDER ${third_party_folder}/meshoptimizer)
endif()

if(NOT TARGET glslang)
    option(BUILD_EXTERNAL "" OFF)
    option(BUILD_SHARED_LIBS "" OFF)
    option(BUILD_TESTING "" OFF)
    option(ENABLE_GLSLANG_BINARIES "" OFF)
    option(ENABLE_CTEST "" OFF)
    option(ENABLE_HLSL "" OFF)
    option(ENABLE_OPT "" OFF)
    option(SKIP_GLSLANG_INSTALL "" ON)

    add_subdirectory(glslang)
    set_target_properties(glslang PROPERTIES FOLDER ${third_party_folder}/glslang)
    set_target_properties(GenericCodeGen PROPERTIES FOLDER ${third_party_folder}/glslang)
    set_target_properties(MachineIndependent PROPERTIES FOLDER ${third_party_folder}/glslang)
    set_target_properties(OGLCompiler PROPERTIES FOLDER ${third_party_folder}/glslang)
    set_target_properties(OSDependent PROPERTIES FOLDER ${third_party_folder}/glslang)
    set_target_properties(SPIRV PROPERTIES FOLDER ${third_party_folder}/glslang)
    set_target_properties(SPVRemapper PROPERTIES FOLDER ${third_party_folder}/glslang)

    # set_target_properties(HLSL PROPERTIES FOLDER ${third_party_folder}/glslang)
endif()

if(NOT TARGET json)
    option(JSON_BuildTests "" OFF)
    option(JSON_Install "" OFF)
    add_subdirectory(json)
    set_target_properties(nlohmann_json PROPERTIES FOLDER ${third_party_folder}/json)
endif()